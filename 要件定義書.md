# 概要
ヒットアンドブローのオンライン対戦webアプリケーションを作成する。
身内で遊ぶための簡易的なシステムとして実装。

---

# 機能要件

## ゲーム基本ルール
- 13個の数字(1-13)の中から4つが自動選出され、正解として設定される
- プレイヤーは4つの数字を予想して回答
- **ヒット**: 位置と数字が一致している数
- **ブロー**: 数字は一致しているが位置が異なる数
- 最も早く正解したプレイヤーが勝利（競争型）
- 全員が正解するか、各プレイヤーが10回回答したらゲーム終了

## プレイヤー管理
- 同時に4人まで参加可能
- トップページで名前とパスワードを入力してゲームページにアクセス
- ルーム管理機能は実装しない（シンプルな1ルーム運用）

## ゲームフロー
1. プレイヤーが順番に回答（ターン制）
2. 各プレイヤーの回答時間は**20秒**
3. 20秒以内に回答がない場合、ランダムな回答が自動送信される
4. 回答後、即座にヒット/ブロー数が表示される
5. 次のプレイヤーのターンに移行
6. 過去の全回答履歴は全プレイヤーに表示される（共有情報）

## 終了条件
- 誰かが正解した時点で勝者確定
- 全員が10回回答完了
- ゲーム終了後、正解が表示される

---

# 非機能要件

## パフォーマンス
- アクティブユーザー10人程度まで対応
- レスポンシブ対応（スマートフォンでもプレイ可能）

## 保守性・拡張性
- 入力UIは一旦数字で実装
- 将来的にアイコン表示に変更可能な柔軟な設計（モック作成時に考慮）

## 今後の検討事項（優先度低）
- 再接続処理（キャッシュ等）
- セキュリティ対策（現時点では保留）

---

# 技術仕様

## フロントエンド
- **React + Vite** (軽量・高速な開発環境)
- **TypeScript** (型安全性の確保)
- **Zustand** (シンプルな状態管理)
- **Tailwind CSS** (レスポンシブ対応のスタイリング)

## リアルタイム通信
- **Ably** (WebSocketベースのリアルタイム通信)
  - データ保存なし、リアルタイム通信のみ
  - 無料枠: 同時接続200、月間600万メッセージ
  - チャンネル機能でゲームルームを実現

## インフラ
- **GitHub Pages** (静的サイトホスティング)
- バックエンドサーバー不要（完全フロント完結）

---

# 画面設計（概要）

## 画面一覧
1. **トップページ**
   - 名前入力フィールド
   - パスワード入力フィールド
   - ゲーム開始ボタン

2. **ゲームページ**
   - 参加プレイヤー一覧
   - 回答履歴表示エリア（全員の履歴）
   - 数字選択UI（1-13から4つ選択）
   - 回答ボタン
   - 残り時間表示（20秒カウントダウン）
   - 現在のターン表示
   - ヒット/ブロー結果表示

3. **結果画面**
   - 勝者表示
   - 正解表示
   - リトライボタン

---

# データ設計

## ゲーム状態
```typescript
{
  answer: number[4],           // 正解（1-13の4つの数字）
  players: Player[],           // プレイヤー一覧（最大4人）
  currentTurn: number,         // 現在のターン（プレイヤーインデックス）
  history: AnswerHistory[],    // 全回答履歴
  gameStatus: 'waiting' | 'playing' | 'finished',
  winner: string | null        // 勝者名
}
```

## プレイヤーデータ
```typescript
{
  id: string,
  name: string,
  answerCount: number,         // 回答回数
  isCorrect: boolean          // 正解したか
}
```

## 回答履歴
```typescript
{
  playerId: string,
  playerName: string,
  guess: number[4],
  hit: number,
  blow: number,
  timestamp: number
}
```

---

# 開発フロー
1. **要件定義** ← 現在ここ
2. **準備** (技術選定、環境構築)
3. **アプリ構築**
4. **公開**
